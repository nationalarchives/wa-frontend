{% extends "layouts/base_page.html" %}
{% from "components/page_header.html" import page_header %}
{% from "components/listing_item.html" import listing_item %}
{% from "components/pagination/macro.html" import tnaPagination %}
{% from "components/navigation.html" import sidebar %}
{% from "components/related_content.html" import related_content %}
{% block content %}
    {{ page_header(page_data.title, page_data.intro | tna_html | safe, True, "flush") }}
    <div class="listing-page tna-container">
        <div class="listing-page__main tna-column tna-column--full tna-column--width-2-3-medium">
            {% if children %}
                <ul class="listing-page__list">
                    {% for child in children %}{{ listing_item(child, child.url) }}{% endfor %}
                </ul>
                {% if pages > 1 %}
                    {{ tnaPagination(pagination) }}
                {% endif %}
            {% endif %}
        </div>
        <aside class="listing-page__sidebar tna-column tna-column--full tna-column--width-1-3-medium">
            {% if page_data.sidebar_navigation %}
                {{ sidebar(page_data.sidebar_navigation.subpages, page_data.sidebar_navigation.parent_page_title, sidebar_cta) }}
            {% endif %}
            {% if page_data.bookmarklet_cta %}
                    {{ tnaCard({
                        "title": page_data.bookmarklet_cta.heading,
                        "body": page_data.bookmarklet_cta.body,
                        "actions": [
                            {
                                "text": page_data.bookmarklet_cta.button_text,
                                "href": page_data.bookmarklet_cta.button_link
                            }
                        ],
                        "style": "contrast"
                    }) }}
                {% endif %}
        </aside>
    </div>
    {% if related_pages %}
        {{ related_content(related_pages, heading="Also of interest", modifier="archive-highlights") }}
    {% endif %}
{% endblock %}
